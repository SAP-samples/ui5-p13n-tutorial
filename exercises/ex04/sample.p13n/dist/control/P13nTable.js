"use strict";sap.ui.define(["sap/m/Table","sap/m/p13n/Engine","sap/m/p13n/SelectionController","sap/m/p13n/MetadataHelper"],function(t,e,n,s){"use strict";const i=t.extend("sample.p13n.app.control.P13nTable",{renderer:"sap/m/TableRenderer",constructor:function n(s,i){t.prototype.constructor.call(this,s,i);this.engine=e.getInstance();this.initialized=new Promise(t=>{this.attachEventOnce("updateFinished",()=>{this.initP13n();t()},this)})},initP13n:function t(){const e=this.getColumns();const i=e.map((t,e)=>{const n=t.getHeader();const s=this.getItems()[0];const i=s.getCells()[e];return{key:t.data("p13nKey"),label:n.getText(false),path:i.getBinding(i.isA("sap.m.ObjectIdentifier")?"title":"text").getPath()}});this.helper=new s(i);this.engine.register(this,{helper:this.helper,controller:{Columns:new n({control:this,targetAggregation:"columns",getKeyForItem:t=>t.data("p13nKey")})}});this.engine.attachStateChange(t=>{const e=t.getParameters();if(e["control"]===this){this.onStateChange(e["state"])}})},onStateChange:function t(e){this.getColumns().forEach(t=>{t.setVisible(e.Columns.some(e=>t.data("p13nKey")===e.key))});e.Columns.forEach(this.moveColum,this)},moveColum:function t(e,n){const s=this.getColumns().find(t=>t.data("p13nKey")===e.key);if(s===undefined)return;const i=this.getColumns().indexOf(s);if(n!=i){this.removeColumn(s);this.insertColumn(s,n);const t=t=>{if(t?.isA("sap.m.ColumnListItem")){const e=t.removeCell(i);if(e!=null)t.insertCell(e,n)}};const e=this.getBindingInfo("items");t(e.template);this.getItems().forEach(e=>t(e))}},openP13n:function t(e){this.engine.show(this,["Columns"],{title:"Table Settings",source:e.getSource()})}});return i});
//# sourceMappingURL=P13nTable.js.map