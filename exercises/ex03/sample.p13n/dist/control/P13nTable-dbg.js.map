{"version":3,"file":"P13nTable-dbg.js","names":["P13nTable","Table","extend","renderer","constructor","_constructor","id","settings","Table.prototype.constructor.call","engine","Engine","getInstance","initialized","Promise","resolve","attachEventOnce","initP13n","_initP13n","columns","getColumns","columnsMetadata","map","column","index","columnHeader","getHeader","columnListItem","getItems","innerControl","getCells","key","data","label","getText","path","getBinding","isA","getPath","helper","MetadataHelper","register","controller","Columns","SelectionController","control","targetAggregation","openP13n","_openP13n","event","show","title","source","getSource"],"sources":["P13nTable.ts"],"sourcesContent":["import Table, { $TableSettings } from \"sap/m/Table\"\nimport Engine from \"sap/m/p13n/Engine\"\nimport SelectionController from \"sap/m/p13n/SelectionController\"\nimport MetadataHelper, { MetadataObject } from \"sap/m/p13n/MetadataHelper\"\nimport Column from \"sap/m/Column\"\nimport Text from \"sap/m/Text\"\nimport Event from \"sap/ui/base/Event\"\nimport Control from \"sap/ui/core/Control\"\nimport ColumnListItem from \"sap/m/ColumnListItem\"\n\n/**\n * @namespace sample.p13n.app.control\n */\nexport default class P13nTable extends Table {\n\tstatic renderer: string = \"sap/m/TableRenderer\"\n\n\tprivate initialized: Promise<void>\n\n\tprivate helper: MetadataHelper\n\n\tprivate engine: Engine\n\n\tconstructor(id?: string, settings?: $TableSettings) {\n\t\tsuper(id, settings)\n\t\tthis.engine = Engine.getInstance()\n\t\tthis.initialized = new Promise((resolve: () => void): void => {\n\t\t\tthis.attachEventOnce(\"updateFinished\", (): void => {\n\t\t\t\tthis.initP13n()\n\t\t\t\tresolve()\n\t\t\t}, this)\n\t\t})\n\t}\n\n\tprivate initP13n(): void {\n\t\tconst columns: Column[] = this.getColumns()\n\t\tconst columnsMetadata: MetadataObject[] = columns.map((column: Column, index: number) => {\n\t\t\tconst columnHeader = column.getHeader() as Text\n\t\t\tconst columnListItem: ColumnListItem = this.getItems()[0] as ColumnListItem\n\t\t\tconst innerControl = columnListItem.getCells()[index]\n\t\t\treturn {\n\t\t\t\tkey: column.data(\"p13nKey\"),\n\t\t\t\tlabel: columnHeader.getText(false),\n\t\t\t\tpath: innerControl.getBinding(innerControl.isA(\"sap.m.ObjectIdentifier\") ? \"title\" : \"text\").getPath()\n\t\t\t}\n\t\t})\n\n\t\tthis.helper = new MetadataHelper(columnsMetadata)\n\n\t\tthis.engine.register(this, {\n\t\t\thelper: this.helper,\n\t\t\tcontroller: {\n\t\t\t\tColumns: new SelectionController({\n\t\t\t\t\tcontrol: this,\n\t\t\t\t\ttargetAggregation: \"columns\"\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic openP13n(event: Event): void {\n\t\tthis.engine.show(this, [\"Columns\"], {\n\t\t\ttitle: \"Table Settings\",\n\t\t\tsource: event.getSource<Control>()\n\t\t})\n\t}\n\n}"],"mappings":";;;EAUA;AACA;AACA;EAFA,MAGqBA,SAAS,GAASC,KAAK,CAAAC,MAAA;IACpCC,QAAQ,EAAW,qBAAqB;IAQ/CC,WAAW,WAAAC,aAACC,EAAW,EAAEC,QAAyB,EAAE;MACnDC,gCAAA,OAAMF,EAAE,EAAEC,QAAQ;MAClB,IAAI,CAACE,MAAM,GAAGC,MAAM,CAACC,WAAW,CAAC,CAAC;MAClC,IAAI,CAACC,WAAW,GAAG,IAAIC,OAAO,CAAEC,OAAmB,IAAW;QAC7D,IAAI,CAACC,eAAe,CAAC,gBAAgB,EAAE,MAAY;UAClD,IAAI,CAACC,QAAQ,CAAC,CAAC;UACfF,OAAO,CAAC,CAAC;QACV,CAAC,EAAE,IAAI,CAAC;MACT,CAAC,CAAC;IACH,CAAC;IAEOE,QAAQ,WAAAC,UAAA,EAAS;MACxB,MAAMC,OAAiB,GAAG,IAAI,CAACC,UAAU,CAAC,CAAC;MAC3C,MAAMC,eAAiC,GAAGF,OAAO,CAACG,GAAG,CAAC,CAACC,MAAc,EAAEC,KAAa,KAAK;QACxF,MAAMC,YAAY,GAAGF,MAAM,CAACG,SAAS,CAAC,CAAS;QAC/C,MAAMC,cAA8B,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAmB;QAC3E,MAAMC,YAAY,GAAGF,cAAc,CAACG,QAAQ,CAAC,CAAC,CAACN,KAAK,CAAC;QACrD,OAAO;UACNO,GAAG,EAAER,MAAM,CAACS,IAAI,CAAC,SAAS,CAAC;UAC3BC,KAAK,EAAER,YAAY,CAACS,OAAO,CAAC,KAAK,CAAC;UAClCC,IAAI,EAAEN,YAAY,CAACO,UAAU,CAACP,YAAY,CAACQ,GAAG,CAAC,wBAAwB,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC,CAACC,OAAO,CAAC;QACtG,CAAC;MACF,CAAC,CAAC;MAEF,IAAI,CAACC,MAAM,GAAG,IAAIC,cAAc,CAACnB,eAAe,CAAC;MAEjD,IAAI,CAACX,MAAM,CAAC+B,QAAQ,CAAC,IAAI,EAAE;QAC1BF,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBG,UAAU,EAAE;UACXC,OAAO,EAAE,IAAIC,mBAAmB,CAAC;YAChCC,OAAO,EAAE,IAAI;YACbC,iBAAiB,EAAE;UACpB,CAAC;QACF;MACD,CAAC,CAAC;IACH,CAAC;IAEMC,QAAQ,WAAAC,UAACC,KAAY,EAAQ;MACnC,IAAI,CAACvC,MAAM,CAACwC,IAAI,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,EAAE;QACnCC,KAAK,EAAE,gBAAgB;QACvBC,MAAM,EAAEH,KAAK,CAACI,SAAS,CAAU;MAClC,CAAC,CAAC;IACH;EAAC;EAAA,OAnDmBpD,SAAS;AAAA","ignoreList":[]}